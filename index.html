<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4Labs | Automatizaci贸n Comercial y Operativa</title>
    <meta name="description"
        content="Automatizamos ventas y soporte para empresas medianas. Chatbots inteligentes y experiencias digitales conectadas a tu operaci贸n.">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Inter+Tight:wght@500;600;700&display=swap"
        rel="stylesheet">

    <!-- Styles -->
    <style>
/* =========================================
   GANIFY REPLICA - FOUNDATION LAYER
   ========================================= */

/* 1. RESET & FUNDAMENTALS */
*,
*::before,
*::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

:root {
    /* FONTS */
    --font-main: 'Inter Tight', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;

    /* COLORS (Exact Ganify Extraction) */
    --bg-void: #000000;
    --bg-card: #0A0A0A;
    --border-card: #1F1F1F;
    --text-primary: #FFFFFF;
    --text-secondary: #888888;
    --accent-glow: rgba(120, 119, 198, 0.3);
    --neon-blue: #00F0FF;
    --neon-green: #00E6A8;

    /* VALUES */
    --tracking-tighter: -0.04em;
    --tracking-tight: -0.02em;
    --radius-lg: 24px;
    --radius-md: 16px;
    --radius-pill: 9999px;
    --header-height: 80px;
}

html,
body {
    width: 100%;
    min-height: 100vh;
    background-color: var(--bg-void);
    color: var(--text-primary);
    font-family: var(--font-main);
    overflow-x: hidden;
    line-height: 1.5;
}

/* NOISE OVERLAY is handled by noise.css */

/* 2. TYPOGRAPHY SYSTEM */
h1,
h2,
h3,
h4,
h5,
h6 {
    font-weight: 500;
    color: var(--text-primary);
    letter-spacing: var(--tracking-tighter);
}

h1 {
    font-size: clamp(4rem, 8vw, 7.5rem);
    line-height: 1.05;
    margin-bottom: 2rem;
}

p {
    color: var(--text-secondary);
    font-size: 1.125rem;
    letter-spacing: var(--tracking-tight);
}

a {
    text-decoration: none;
    color: inherit;
    transition: color 0.3s ease;
}

/* 3. UTILITIES (No Bootstrap) */
.container-custom {
    width: 100%;
    max-width: 1400px;
    /* Ganify uses a wide container */
    margin: 0 auto;
    padding: 0 60px;
}

.container {
    width: 100%;
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 60px;
}

.flex-center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.flex-col {
    display: flex;
    flex-direction: column;
}

.text-center {
    text-align: center;
}

.text-center-flex,
.card-centered {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
}

/* Holographic Gradient Animation */
@keyframes shimmer {
    0% {
        background-position: 0% 50%;
    }

    50% {
        background-position: 100% 50%;
    }

    100% {
        background-position: 0% 50%;
    }
}

.text-gradient {
    /* Premium Holographic Gradient */
    background: linear-gradient(270deg,
            #FFFFFF 0%,
            #e0e0e0 20%,
            #00E6A8 40%,
            #00F0FF 60%,
            #7018FF 80%,
            #FFFFFF 100%);
    background-size: 300% 300%;
    animation: shimmer 8s ease infinite;
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.1));
}

/* 4. SCROLLBAR */
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background: var(--bg-void);
}

::-webkit-scrollbar-thumb {
    background: #333;
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: #555;
}

/* 5. MOTION PRIMITIVES (Will be used by JS) */
.split-line {
    overflow: hidden;
    display: block;
}

/* 6. HERO SECTION (CENTERED) */
.hero-centered {
    position: relative;
    width: 100%;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    padding-top: 80px;
    /* Offset for navbar */
}

#bg-canvas {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
    /* Behind content but above some bg layers */
    pointer-events: auto;
    /* allow interaction */
}

/* Background Layers */
.hero-bg-layer {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 0;
}

.bg-void {
    background-color: var(--bg-void);
}

.bg-gradient-glow {
    background:
        radial-gradient(circle at 20% 20%, rgba(112, 24, 255, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(0, 240, 255, 0.1) 0%, transparent 50%);
    filter: blur(80px);
    opacity: 0.6;
}

/* Hologram Anchor */
.hero-visual-anchor {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 800px;
    height: 800px;
    z-index: 1;
    opacity: 0.8;
    pointer-events: none;
    mix-blend-mode: screen;
}

.hologram-pulse {
    width: 100%;
    height: 100%;
    object-fit: contain;
    animation: float-pulse 8s ease-in-out infinite;
}

@keyframes float-pulse {

    0%,
    100% {
        transform: translateY(0) scale(1);
        opacity: 0.8;
    }

    50% {
        transform: translateY(-20px) scale(1.05);
        opacity: 1;
    }
}

/* Status Pill */
.status-pill {
    display: flex;
    align-items: center;
    gap: 8px;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.08);
    padding: 8px 16px;
    border-radius: var(--radius-pill);
    font-size: 0.75rem;
    font-weight: 600;
    letter-spacing: 0.05em;
    color: var(--text-secondary);
    margin-bottom: 2rem;
    backdrop-filter: blur(10px);
}

.dot-online {
    width: 6px;
    height: 6px;
    background: var(--neon-blue);
    border-radius: 50%;
    box-shadow: 0 0 10px var(--neon-blue);
}

/* Hero Title */
.hero-title {
    font-size: clamp(3.5rem, 7vw, 6.5rem);
    line-height: 1.05;
    margin-bottom: 1.5rem;
    z-index: 10;
}

/* Animation Mechanics */
.split-line {
    display: block;
    overflow: hidden;
}

.reveal-inner {
    display: block;
    transform: translateY(120%);
    filter: blur(5px);
    transition: transform 1.6s cubic-bezier(0.16, 1, 0.3, 1), filter 1.6s ease;
}

.is-visible .reveal-inner {
    transform: translateY(0);
    filter: blur(0);
}

.hero-title .split-line:nth-child(1) .reveal-inner {
    transition-delay: 0.1s;
}

.hero-title .split-line:nth-child(2) .reveal-inner {
    transition-delay: 0.2s;
}

.hero-title .split-line:nth-child(3) .reveal-inner {
    transition-delay: 0.3s;
}

/* Epic Reveal Animation */
.reveal-clip {
    opacity: 0;
    transform: translateY(60px);
    /* Increased distance */
    filter: blur(10px);
    /* Cinematic blur start */
    transition: all 1.6s cubic-bezier(0.25, 1, 0.5, 1);
    /* Epic duration & easing */
    will-change: transform, opacity, filter;
}

.reveal-clip.is-visible {
    opacity: 1;
    transform: translateY(0);
    filter: blur(0);
    /* Blur reveal */
}

/* TYPEWRITER EFFECT */
.type-writer::after {
    content: '|';
    display: inline-block;
    color: var(--neon-blue);
    margin-left: 2px;
    animation: blink-cursor 0.8s step-end infinite;
}

.type-writer.typing-done::after {
    display: none;
}

@keyframes blink-cursor {

    from,
    to {
        opacity: 1;
    }

    50% {
        opacity: 0;
    }
}

.delay-1 {
    transition-delay: 0.4s;
}

.delay-2 {
    transition-delay: 0.6s;
}

/* Subtitle */
.hero-subtitle {
    max-width: 600px;
    margin-bottom: 3rem;
    font-size: 1.25rem;
    color: var(--text-secondary);
    z-index: 10;
}

/* Ganify Buttons */
.hero-buttons {
    gap: 20px;
    z-index: 10;
}

.btn-ganify {
    position: relative;
    padding: 16px 32px;
    border-radius: var(--radius-pill);
    font-weight: 600;
    letter-spacing: -0.01em;
    font-size: 0.95rem;
    transition: all 0.3s ease;
    overflow: hidden;
}

.btn-ganify.primary {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: #fff;
}

.btn-ganify.primary:hover {
    border-color: rgba(255, 255, 255, 0.3);
    box-shadow: 0 0 30px rgba(0, 240, 255, 0.15);
    transform: translateY(-2px);
}

.btn-ganify.secondary {
    color: var(--text-secondary);
}

.btn-whatsapp {
    background-color: #25D366;
    color: white;
    padding: 10px 20px;
    border-radius: var(--radius-pill);
    font-weight: 600;
    transition: all 0.3s ease;
}

.btn-whatsapp:hover {
    background-color: #128C7E;
    box-shadow: 0 0 15px rgba(37, 211, 102, 0.4);
    transform: translateY(-2px);
    color: white;
}

/* 7. COMPONENTS (BENTO & CARDS) */

/* Section Layout */
.section {
    padding: 120px 0;
    position: relative;
    z-index: 10;
}

.section-header {
    text-align: center;
    max-width: 800px;
    margin: 0 auto 80px auto;
}

.section-title span {
    display: block;
    font-size: 3.5rem;
    font-weight: 500;
    margin-bottom: 24px;
    letter-spacing: -0.05em;
    background: linear-gradient(to bottom, #fff 40%, rgba(255, 255, 255, 0.5) 100%);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
}

.section-subtitle span {
    color: var(--text-secondary);
    font-size: 1.15rem;
}

/* Bento Grid System */
.bento-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-gap: 24px;
    width: 100%;
}

/* Spans */
.span-2 {
    grid-column: span 2;
}

.span-3 {
    grid-column: span 3;
}

.row-2 {
    grid-row: span 2;
}

/* Card Styles (The "Dark Matter" Look) */
.bento-card {
    background-color: rgba(10, 10, 10, 0.3);
    /* Deep Glass */
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: var(--radius-lg);
    padding: 40px;
    position: relative;
    overflow: hidden;
    transition: all 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
    display: flex;
    flex-direction: column;
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.2);
}

/* Color Accents */
.bento-card.accent-green {
    /* border-top: 2px solid var(--neon-green);  Removed per user request */
}

.bento-card.accent-green:hover {
    box-shadow: 0 20px 40px rgba(0, 230, 168, 0.15);
    border-color: var(--neon-green);
}

.bento-card.accent-blue {
    /* border-top: 2px solid var(--neon-blue); Removed per user request */
}

.bento-card.accent-blue:hover {
    box-shadow: 0 20px 40px rgba(0, 240, 255, 0.15);
    border-color: var(--neon-blue);
}

.bento-card.accent-purple {
    /* border-top: 2px solid var(--primary-purple, #7018FF); Removed per user request */
}

.bento-card.accent-purple:hover {
    box-shadow: 0 20px 40px rgba(112, 24, 255, 0.15);
    border-color: var(--primary-purple, #7018FF);
}


/* Card Interactions */
.bento-card:hover {
    border-color: rgba(255, 255, 255, 0.4);
    background-color: rgba(30, 30, 30, 0.6);
    transform: translateY(-5px) scale(1.01);
    box-shadow:
        0 20px 60px rgba(0, 0, 0, 0.6),
        0 0 20px rgba(255, 255, 255, 0.05) inset;
}

/* Dynamic Inner Glow */
.bento-card::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: var(--radius-lg);
    background: radial-gradient(800px circle at var(--mouse-x, 50%) var(--mouse-y, 50%), rgba(255, 255, 255, 0.04), transparent 40%);
    opacity: 0;
    transition: opacity 0.4s;
    pointer-events: none;
    z-index: 1;
}

.bento-card:hover::after {
    opacity: 1;
}

/* Card Icons */
.card-icon {
    font-size: 1.8rem;
    margin-bottom: 24px;
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 12px;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.05);
    color: var(--text-secondary);
    transition: all 0.3s cubic-bezier(0.25, 1, 0.5, 1);
}

.bento-card:hover .card-icon {
    transform: scale(1.1) rotate(-5deg);
    background: rgba(255, 255, 255, 0.1);
    color: #fff;
    border-color: rgba(255, 255, 255, 0.2);
}

/* Accent-specific Icon Colors on Hover */
.bento-card.accent-green:hover .card-icon {
    color: var(--neon-green);
    background: rgba(0, 230, 168, 0.1);
    border-color: rgba(0, 230, 168, 0.3);
    box-shadow: 0 0 20px rgba(0, 230, 168, 0.2);
}

.bento-card.accent-blue:hover .card-icon {
    color: var(--neon-blue);
    background: rgba(0, 240, 255, 0.1);
    border-color: rgba(0, 240, 255, 0.3);
    box-shadow: 0 0 20px rgba(0, 240, 255, 0.2);
}

.bento-card.accent-purple:hover .card-icon {
    color: var(--primary-purple);
    background: rgba(112, 24, 255, 0.1);
    border-color: rgba(112, 24, 255, 0.3);
    box-shadow: 0 0 20px rgba(112, 24, 255, 0.2);
}

/* Form Styles */
.form-group {
    margin-bottom: 20px;
}

.form-label {
    display: block;
    font-size: 0.75rem;
    color: #666;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    margin-bottom: 8px;
}

.form-input {
    width: 100%;
    padding: 16px;
    background: #050505;
    border: 1px solid #222;
    color: #fff;
    font-family: var(--font-main);
    font-size: 1rem;
    transition: border-color 0.3s ease;
}

.form-input:focus {
    outline: none;
    border-color: var(--neon-blue);
}

/* Navbar Style (Phase 3 Requirement) */
.navbar {
    position: fixed;
    top: 20px;
    left: 0;
    width: 100%;
    z-index: 1000;
    pointer-events: none;
    /* Let clicks pass through around the pill */
}

.nav-container {
    pointer-events: auto;
    background: rgba(10, 10, 10, 0.7);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 100px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 24px;
    max-width: 900px !important;
    /* Specific width constraint for the pill */
    margin: 0 auto;
    transition: all 0.3s ease;
}

.nav-logo {
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 600;
    color: #fff;
}

.nav-logo img {
    height: 24px;
}

.nav-links {
    display: flex;
    list-style: none;
    gap: 32px;
}

.nav-link {
    font-size: 0.9rem;
    color: var(--text-secondary);
    font-weight: 500;
    position: relative;
}

.nav-link:hover,
.nav-link.active {
    color: #fff;
}

.nav-cta {
    font-size: 0.85rem;
    color: #fff;
    background: rgba(255, 255, 255, 0.1);
    padding: 8px 16px;
    border-radius: 100px;
    transition: background 0.2s;
}

.nav-cta:hover {
    background: rgba(255, 255, 255, 0.2);
}

/* Responsive Grid */
@media (max-width: 1024px) {
    .bento-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .span-3 {
        grid-column: span 2;
    }
}

@media (max-width: 768px) {
    .bento-grid {
        grid-template-columns: 1fr;
    }

    .span-2,
    .span-3 {
        grid-column: 1;
    }

}

/* =========================================
   8. CHATBOT WIDGET
   ========================================= */
#ai-chat-wrapper {
    position: fixed;
    bottom: 30px;
    right: 30px;
    z-index: 9999;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    pointer-events: none;
    /* Let clicks pass through wrapper area */
}

/* Chat Window */
#ai-chat-window {
    width: 340px;
    height: 480px;
    background: rgba(10, 10, 10, 0.9);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    margin-bottom: 15px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
    pointer-events: auto;
    transition: all 0.3s cubic-bezier(0.25, 1, 0.5, 1);
    transform-origin: bottom right;
}

div#ai-chat-window.chat-hidden {
    opacity: 0;
    transform: scale(0.9) translateY(20px);
    pointer-events: none;
}

/* Header */
.chat-header {
    background: rgba(255, 255, 255, 0.05);
    padding: 16px;
    display: flex;
    align-items: center;
    gap: 12px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.chat-header img {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: transparent;
    /* Ensure no background */
    object-fit: contain;
}

.chat-header h4 {
    font-size: 0.95rem;
    font-weight: 600;
    margin: 0;
    color: #fff;
}

.status-online {
    display: block;
    font-size: 0.7rem;
    color: #00E6A8;
}

#close-chat {
    background: none;
    border: none;
    color: #888;
    margin-left: auto;
    cursor: pointer;
    font-size: 1.1rem;
    transition: color 0.2s;
}

#close-chat:hover {
    color: #fff;
}

/* Messages Area */
#chat-messages {
    flex: 1;
    padding: 16px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.msg {
    max-width: 85%;
    padding: 10px 14px;
    border-radius: 12px;
    font-size: 0.9rem;
    line-height: 1.5;
    animation: fade-in 0.3s ease;
}

@keyframes fade-in {
    from {
        opacity: 0;
        transform: translateY(5px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.bot-msg {
    background: rgba(255, 255, 255, 0.05);
    color: #eee;
    align-self: flex-start;
    border-bottom-left-radius: 2px;
}

.user-msg {
    background: var(--primary-purple, #7018FF);
    /* Fallback if var not defined, though used elsewhere */
    background: linear-gradient(135deg, #7018FF 0%, #a448ff 100%);
    color: #fff;
    align-self: flex-end;
    border-bottom-right-radius: 2px;
}

/* Input Area */
.chat-input-area {
    padding: 12px;
    background: rgba(0, 0, 0, 0.3);
    border-top: 1px solid rgba(255, 255, 255, 0.05);
    display: flex;
    gap: 8px;
}

#chat-user-input {
    flex: 1;
    background: rgba(255, 255, 255, 0.05);
    border: none;
    border-radius: 20px;
    padding: 10px 16px;
    color: #fff;
    font-size: 0.9rem;
    font-family: inherit;
}

#chat-user-input:focus {
    outline: 1px solid rgba(255, 255, 255, 0.2);
}

#send-chat {
    background: var(--neon-blue);
    color: #000;
    border: none;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.2s;
}

#send-chat:hover {
    transform: scale(1.1);
}

/* Mascot Trigger */
.robot-mascot {
    position: relative;
    width: 80px;
    cursor: pointer;
    pointer-events: auto;
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);

    /* Entrance Animation */
    animation: fly-in-sit 2.5s cubic-bezier(0.25, 1, 0.5, 1) forwards;
    /* Epic Fly-in */
}

@keyframes fly-in-sit {
    0% {
        opacity: 0;
        transform: translate(120vw, -120vh) rotate(45deg) scale(0.5);
        /* Start far off-screen top-right */
    }

    60% {
        opacity: 1;
        transform: translate(-20px, 10px) rotate(-10deg) scale(1.1);
        /* Overshoot slightly */
    }

    80% {
        transform: translate(10px, -5px) rotate(5deg) scale(0.95);
        /* Correction bounce */
    }

    100% {
        transform: translate(0, 0) rotate(0) scale(1);
        /* Land gently */
    }
}

.robot-mascot:hover {
    transform: scale(1.1) rotate(-5deg);
}

.robot-mascot img {
    width: 100%;
    filter: drop-shadow(0 0 20px rgba(112, 24, 255, 0.4));
}

.robot-greeting-bubble {
    position: absolute;
    bottom: 100%;
    right: 0;
    margin-bottom: 10px;
    background: #fff;
    color: #000;
    padding: 8px 16px;
    border-radius: 12px;
    border-bottom-right-radius: 2px;
    font-size: 0.85rem;
    font-weight: 600;
    white-space: nowrap;
    opacity: 0;
    transform: translateY(10px);
    transition: all 0.3s ease;
    pointer-events: none;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.robot-greeting-bubble.visible {
    opacity: 1;
    transform: translateY(0);
}
</style>
    <style>
.bg-noise {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    pointer-events: none;
    z-index: 9999;
    /* background-image: url("data:image/svg+xml,..."); Disabled for performance */
    opacity: 0;
    /* Hidden for performance */
    mix-blend-mode: overlay;
}
</style>

    <!-- Favicon -->
    <link rel="icon" href="logo_transparent_1769826451330.png">

    <!-- Open Graph / SEO -->
    <meta property="og:title" content="4Labs | Automatizaci贸n Comercial y Operativa">
    <meta property="og:description"
        content="Automatizamos ventas y soporte para empresas medianas. Chatbots inteligentes y experiencias digitales conectadas a tu operaci贸n.">
    <meta property="og:image" content="logo_transparent_1769826451330.png">
    <meta property="og:url" content="https://4labs.co">
    <meta property="og:type" content="website">

    <!-- Icons (using fontawesome for now as placeholder) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://unpkg.com/@studio-freight/lenis@1.0.42/dist/lenis.min.js"></script>
</head>

<body>
    <div class="bg-noise"></div>
    <canvas id="bg-canvas"></canvas>
    <!-- Removed legacy viewport-frame -->

    <!-- Navbar -->
    <nav class="navbar">
        <div class="container-custom nav-container">
            <a href="#inicio" class="nav-logo">
                <img src="logo_transparent_1769826451330.png" alt="4Labs Logo">
                <span>4Labs</span>
            </a>
            <ul class="nav-links">
                <li><a href="#inicio" class="nav-link active">Inicio</a></li>
                <li><a href="#productos" class="nav-link">Productos</a></li>
                <li><a href="#proceso" class="nav-link">C贸mo trabajamos</a></li>
                <li><a href="#casos" class="nav-link">Casos de uso</a></li>
                <li><a href="#contacto" class="nav-link">Contacto</a></li>
            </ul>
            <a href="https://wa.me/50672293518" class="nav-cta btn-whatsapp" target="_blank">
                <i class="fa-brands fa-whatsapp"></i> Hablar por WhatsApp
            </a>
        </div>
    </nav>

    <!-- Hero Section -->
    <!-- Hero Section (Centered "Portal" Layout) -->
    <header id="inicio" class="hero-centered">
        <!-- Background Layers -->
        <div class="hero-bg-layer bg-void"></div>
        <div class="hero-bg-layer bg-gradient-glow"></div>
        <div class="hero-bg-layer bg-stars"></div> <!-- CSS Stars or Canvas -->

        <!-- Center Visual Removed -->

        <div class="container-custom flex-col flex-center" style="position: relative; z-index: 10;">
            <!-- Status Pill -->
            <div class="status-pill reveal-clip">
                <span class="dot-online"></span>
                <span>SISTEMAS DE ALTO RENDIMIENTO</span>
            </div>

            <!-- Massive H1 (Clip-Path Reveal Structure) -->
            <h1 class="hero-title text-center">
                <span class="split-line"><span class="reveal-inner">Desplegando</span></span>
                <span class="split-line"><span class="reveal-inner text-gradient">Inteligencia Real</span></span>
                <span class="split-line"><span class="reveal-inner">en tu Operaci贸n.</span></span>
            </h1>

            <!-- Subtitle -->
            <p class="hero-subtitle text-center reveal-clip delay-1">
                Chatbots y experiencias digitales que no solo responden, sino que ejecutan.
                Calificaci贸n de leads, seguimiento autom谩tico y control total.
            </p>

            <!-- Buttons -->
            <div class="hero-buttons flex-center reveal-clip delay-2">
                <a href="https://wa.me/50672293518" class="btn-ganify primary" target="_blank">
                    <span class="btn-text">INICIAR DIAGNSTICO</span>
                    <div class="btn-glow"></div>
                </a>
                <a href="#contacto" class="btn-ganify secondary">
                    <span class="btn-text">AGENDAR LLAMADA</span>
                </a>
            </div>
        </div>
    </header>

    <!-- Problems We Solve (Bento Grid) -->
    <section id="problemas" class="section">
        <div class="container-custom">
            <div class="section-header">
                <h2 class="section-title reveal-text"><span class="text-gradient">Lo que resolvemos</span></h2>
                <p class="section-subtitle reveal-text"><span>Si te identificas con esto, podemos ayudarte.</span></p>
            </div>
            <div class="bento-grid">
                <!-- Large Card -->
                <!-- Large Card -->
                <!-- Large Card -->
                <div class="bento-card span-2 reveal accent-purple">
                    <div class="card-icon"><i class="fa-solid fa-comment-slash"></i></div>
                    <div class="card-content">
                        <span class="status-tag critical">Cr铆tico</span>
                        <h3 class="problem-title type-writer">Leads sin respuesta</h3>
                    </div>
                    <p class="problem-desc">Clientes potenciales que escriben y nadie contesta a tiempo. En la era
                        digital, 5 minutos de espera es una venta perdida.</p>
                </div>

                <!-- Small Card -->
                <div class="bento-card reveal stagger-1 accent-blue">
                    <div class="card-icon"><i class="fa-solid fa-ghost"></i></div>
                    <h3 class="problem-title type-writer">Seguimientos olvidados</h3>
                    <p class="problem-desc">Vendedores que pierden el hilo.</p>
                </div>

                <!-- Small Card -->
                <div class="bento-card reveal stagger-1 accent-green">
                    <div class="card-icon"><i class="fa-solid fa-briefcase-medical"></i></div>
                    <h3 class="problem-title type-writer">Soporte ca贸tico</h3>
                    <p class="problem-desc">Tickets perdidos en chats.</p>
                </div>

                <!-- Large Card -->
                <!-- Large Card -->
                <div class="bento-card span-2 accent-green">
                    <div class="card-icon"><i class="fa-solid fa-database"></i></div>
                    <div class="card-content">
                        <span class="status-tag control">Control</span>
                        <h3 class="problem-title type-writer">Datos dispersos</h3>
                    </div>
                    <p class="problem-desc">Sin claridad de m茅tricas ni control sobre la operaci贸n. Un negocio sin datos
                        es un barco a la deriva.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Chatbots & Web (Bento Grid) -->
    <!-- Productos Section (Bento) -->
    <section id="productos" class="section">
        <div class="container-custom">
            <div class="section-header reveal">
                <h2 class="section-title reveal-text"><span class="text-gradient">L铆nea de Chatbots</span></h2>
                <p class="section-subtitle reveal-text"><span>Asistentes inteligentes que operan en el n煤cleo de tu
                        negocio.</span></p>
            </div>

            <div class="bento-grid">
                <!-- Comercial Externo -->
                <!-- Comercial Externo -->
                <div class="bento-card span-2 row-2 ecosystem-card-image reveal accent-green card-centered">
                    <div class="ecosystem-overlay">
                        <div class="card-icon" style="margin-bottom: 15px;"><i class="fa-solid fa-users"></i></div>
                        <span class="status-tag sales">MDULO DE VENTAS</span>
                        <h3 class="type-writer">Comercial Externo</h3>
                        <p>Atenci贸n, calificaci贸n y agendamiento 24/7. El primer punto de contacto perfecto.</p>
                        <div class="card-tags">
                            <span>SYNC CRM</span>
                            <span>WHATSAPP API</span>
                        </div>
                    </div>
                </div>

                <!-- T茅cnico Externo -->
                <div class="bento-card reveal stagger-1 accent-blue card-centered">
                    <div class="card-icon"><i class="fa-solid fa-headset"></i></div>
                    <h3 class="type-writer">Soporte T茅cnico</h3>
                    <p>Clasificaci贸n autom谩tica de tickets y recepci贸n de evidencias multimedia.</p>
                </div>

                <!-- Direcci贸n -->
                <!-- Direcci贸n -->
                <!-- Direcci贸n -->
                <div class="bento-card row-2 ecosystem-card-image reveal stagger-2 accent-purple card-centered">
                    <div class="ecosystem-overlay">
                        <div class="card-icon" style="margin-bottom: 15px;"><i class="fa-solid fa-chart-pie"></i></div>
                        <h3 class="type-writer">M贸dulo de Direcci贸n</h3>
                        <p>Visi贸n total del negocio en tiempo real. Reportes ejecutivos directos a tu m贸vil.</p>
                    </div>
                </div>

                <!-- Comercial Interno -->
                <div class="bento-card accent-purple card-centered">
                    <div class="card-icon"><i class="fa-solid fa-user-tie"></i></div>
                    <h3 class="type-writer">Asistente Interno</h3>
                    <p>Garantiza el seguimiento de leads y asiste a tu equipo comercial.</p>
                </div>

                <!-- Gesti贸n Operativa -->
                <!-- Gesti贸n Operativa -->
                <div class="bento-card accent-green card-centered">
                    <div class="card-icon"><i class="fa-solid fa-screwdriver-wrench"></i></div>
                    <h3 class="type-writer">Gesti贸n de Campo</h3>
                    <p>Cierre de tickets y reportes r谩pidos para t茅cnicos en calle garantizando trazabilidad total.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Web Experiences Section (Bento) -->
    <section class="section" style="padding-top: 0;">
        <div class="container-custom">
            <div class="section-header">
                <h2 class="section-title reveal-text"><span class="text-gradient">Web & Apps</span></h2>
                <p class="section-subtitle reveal-text"><span>Tu operaci贸n orquestada desde una oficina digital
                        inteligente.</span></p>
            </div>

            <div class="bento-grid">
                <div class="bento-card span-3 reveal accent-blue"
                    style="min-height: 400px; background: linear-gradient(to right, #0A0A0A, #111);">
                    <div class="card-content" style="max-width: 600px; z-index: 2;">
                        <div class="card-icon"><i class="fa-solid fa-laptop-code"></i></div>
                        <span class="status-tag control">PLATAFORMAS DIGITALES</span>
                        <h3 style="font-size: 3rem; margin-bottom: 20px;">Sistemas Web a Medida</h3>
                        <p style="font-size: 1.2rem; margin-bottom: 30px;">
                            Dashboards administrativos, portales de clientes y redes neuronales de datos coordinadas
                            en una interfaz de alt铆sima resoluci贸n y dise帽o premium.
                        </p>
                        <div class="card-tags">
                            <span>DASHBOARDS BI</span>
                            <span>PORTALES B2B</span>
                            <span>INTEGRACIONES API</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Why 4Labs -->
    <section class="section">
        <div class="container/custom"> <!-- Ensure we use custom container everywhere? Index used container before -->
            <!-- Actually styles.css defines container-custom but index uses container in older sections. 
                  Wait, styles.css has container-custom. I should just use container-custom here 
                  or ensure container is mapped. I removed .container from styles? Yes. 
                  So I must use container-custom. -->
            <div class="container-custom">
                <div class="section-header">
                    <h2 class="section-title reveal-text"><span class="text-gradient">Por qu茅 4Labs</span></h2>
                </div>
                <!-- Reusing bento grid for why items -->
                <div class="bento-grid" style="grid-template-columns: repeat(4, 1fr);">
                    <div class="bento-card reveal stagger-1 accent-green">
                        <div class="card-icon"><i class="fa-solid fa-cogs"></i></div>
                        <h3 class="type-writer">Automatizaci贸n real</h3>
                        <p>Pr谩ctica y orientada a resultados, no humo.</p>
                    </div>
                    <div class="bento-card reveal stagger-2 accent-blue">
                        <div class="card-icon"><i class="fa-solid fa-chart-line"></i></div>
                        <h3 class="type-writer">Enfoque en negocio</h3>
                        <p>Entendemos procesos, no solo c贸digo.</p>
                    </div>
                    <div class="bento-card reveal stagger-3 accent-purple">
                        <div class="card-icon"><i class="fa-solid fa-layer-group"></i></div>
                        <h3 class="type-writer">Soluciones escalables</h3>
                        <p>Crecen contigo y tu operaci贸n.</p>
                    </div>
                    <div class="bento-card reveal stagger-4 accent-green">
                        <div class="card-icon"><i class="fa-solid fa-building-user"></i></div>
                        <h3 class="type-writer">Para empresas serias</h3>
                        <p>Dise帽ado para la operaci贸n real.</p>
                    </div>
                </div>
            </div>
    </section>

    <!-- Process Summary -->
    <section id="proceso" class="section">
        <div class="container-custom">
            <div class="section-header">
                <h2 class="section-title reveal-text"><span class="text-gradient">Nuestra Metodolog铆a</span></h2>
                <p class="section-subtitle reveal-text"><span>Ingenier铆a de procesos reales aplicada a la
                        automatizaci贸n.</span></p>
            </div>

            <div class="bento-grid">
                <!-- Step 1 -->
                <div class="bento-card span-2 reveal accent-green">
                    <div class="card-icon" style="margin-bottom: 0px; position:absolute; top:30px; right:30px;"><i
                            class="fa-solid fa-magnifying-glass-chart"></i></div>
                    <span class="status-tag critical">01 / INGENIERA</span>
                    <h3 class="type-writer">Diagn贸stico R谩pido</h3>
                    <p>Analizamos el flujo de datos de tu operaci贸n actual para identificar cuellos de botella mediante
                        mapas de procesos deterministas.</p>
                </div>

                <!-- Step 2 -->
                <div class="bento-card reveal stagger-1 accent-blue">
                    <div class="card-icon"><i class="fa-solid fa-compass-drafting"></i></div>
                    <span class="status-tag sales">02 / ARQUITECTURA</span>
                    <h3 class="type-writer">Dise帽o</h3>
                    <p>Infraestructura de respuesta para una ejecuci贸n robusta.</p>
                </div>

                <!-- Step 3 -->
                <div class="bento-card reveal stagger-2 accent-purple">
                    <div class="card-icon"><i class="fa-solid fa-server"></i></div>
                    <span class="status-tag control">03 / DESPLIEGUE</span>
                    <h3 class="type-writer">Implementaci贸n</h3>
                    <p>Construcci贸n y conexi贸n nativa con tu stack actual.</p>
                </div>

                <!-- Step 4 -->
                <div class="bento-card span-2 reveal stagger-3 accent-green">
                    <div class="card-icon"><i class="fa-solid fa-bolt"></i></div>
                    <h3 class="type-writer">Pruebas de Estr茅s</h3>
                    <p>Validamos cada escenario bajo cargas cr铆ticas para garantizar alta disponibilidad antes del
                        Go-Live.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Casos de Uso Section -->
    <section id="casos" class="section">
        <div class="container-custom">
            <div class="section-header">
                <h2 class="section-title reveal-text"><span class="text-gradient">Resultados Reales</span></h2>
                <p class="section-subtitle reveal-text"><span>Problemas complejos, soluciones simples.</span></p>
            </div>

            <div class="bento-grid">
                <!-- Ventas -->
                <div class="bento-card span-2 reveal accent-green">
                    <div class="card-content">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 20px;">
                            <span class="status-tag sales">Ventas</span>
                            <div class="card-icon" style="margin-bottom:0;"><i class="fa-solid fa-chart-line"></i></div>
                        </div>
                        <h3 class="problem-title">"Perd铆amos el 40% de los leads por no contestar."</h3>
                        <p class="problem-desc">
                            <strong>Soluci贸n:</strong> Chatbot en WhatsApp que responde en 2 segundos, califica al
                            cliente y lo agenda en el CRM.
                        </p>
                        <div
                            style="margin-top:auto; background: #1a1a1a; padding: 15px; border-radius: 4px; border-left: 3px solid #00E6A8;">
                            <div style="font-size: 0.9rem; color: #aaa;">Resultado:</div>
                            <div style="font-size: 1.25rem; color: #fff; font-weight: 700;">+35% Tasa de Conversi贸n
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Direcci贸n -->
                <div class="bento-card span-2 reveal stagger-1 accent-blue">
                    <div class="card-content">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 20px;">
                            <span class="status-tag control">Direcci贸n</span>
                            <div class="card-icon" style="margin-bottom:0;"><i class="fa-solid fa-user-tie"></i></div>
                        </div>
                        <h3 class="problem-title">"Nunca sab铆a cu谩nto hab铆amos vendido hoy."</h3>
                        <p class="problem-desc">
                            <strong>Soluci贸n:</strong> Reporte diario autom谩tico a las 8 PM con ventas, tickets y
                            bancos.
                        </p>
                        <div
                            style="margin-top:auto; background: rgba(30,30,30,0.4); padding: 15px; border-radius: 4px; border-left: 3px solid var(--primary-purple); backdrop-filter: blur(10px);">
                            <div style="font-size: 0.9rem; color: #aaa;">Resultado:</div>
                            <div style="font-size: 1.25rem; color: #fff; font-weight: 700;">Control Total (0 Esfuerzo)
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Soporte -->
                <div class="bento-card row-2 reveal stagger-2 accent-purple">
                    <div class="card-content">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 20px;">
                            <span class="status-tag critical">Soporte</span>
                            <div class="card-icon" style="margin-bottom:0;"><i class="fa-solid fa-life-ring"></i></div>
                        </div>
                        <h3 class="problem-title">Caos en WhatsApp</h3>
                        <p class="problem-desc">
                            T茅cnicos respondiendo tarde y sin ticket.
                        </p>
                        <div style="margin-top:auto;">
                            <div style="font-size: 3.5rem; font-weight: 800; color: #fff;">-2h</div>
                            <div style="font-size: 0.9rem; color: #888;">Tiempo de respuesta promedio</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contacto Section -->
    <section id="contacto" class="section">
        <div class="container-custom">
            <div class="section-header">
                <h2 class="section-title reveal-text"><span class="text-gradient">Hablemos de Tu Proyecto</span></h2>
                <p class="section-subtitle reveal-text"><span>Agenda una conversaci贸n t茅cnica y veamos c贸mo podemos
                        escalar tu operaci贸n.</span></p>
            </div>
            <div class="bento-grid" style="grid-template-columns: 1.2fr 0.8fr; gap: 30px;">
                <!-- Form Side -->
                <div class="bento-card span-2 accent-purple" style="padding: 50px;">
                    <!-- Form Side -->
                    <div class="bento-card span-2 accent-purple card-centered" style="padding: 50px;">
                        <div class="card-icon"><i class="fa-solid fa-calendar-check"></i></div>
                        <h3 style="font-size: 2rem; margin-bottom: 20px; text-transform: uppercase;">Agenda una Reuni贸n
                        </h3>
                        <p style="margin-bottom: 30px; max-width: 400px;">Selecciona el horario que mejor te funcione en
                            nuestro calendario.</p>
                        <a href="https://cal.com/ventas4labs-86faii" target="_blank" class="btn-ganify primary">
                            <span class="btn-text">AGENDAR AHORA</span>
                            <div class="btn-glow"></div>
                        </a>
                    </div>

                    <!-- Info Side -->
                    <div style="display: flex; flex-direction: column; gap: 30px;">
                        <div class="bento-card ecosystem-card-image accent-blue" style="min-height: 250px;">
                            <!-- Using CSS for background image if needed or keeping inline just for image url if dynamic -->
                            <!-- Keeping inline for specific image is slightly acceptable if classes handle the rest, but let's try to be clean. 
                              I'll add a class for this specific card bg in logic or just leave inline for the URL only. 
                              Actually, better to remove inline and use a class .bg-handshake 
                          -->
                            <div class="ecosystem-overlay">
                                <div class="card-icon" style="margin-bottom: 15px;"><i
                                        class="fa-solid fa-handshake"></i>
                                </div>
                                <span class="status-tag control">Partnership Digital</span>
                            </div>
                        </div>

                        <div class="bento-card accent-green" style="padding: 30px;">
                            <h4
                                style="color: #fff; margin-bottom: 20px; text-transform: uppercase; font-size: 0.9rem; letter-spacing: 1px;">
                                Directorio de Enlace</h4>

                            <div style="margin-bottom: 20px;">
                                <div
                                    style="color: #555; font-size: 0.7rem; text-transform: uppercase; font-weight: 700;">
                                    WhatsApp Operativo</div>
                                <a href="https://wa.me/50672293518"
                                    style="font-size: 1.1rem; color: var(--neon-blue); text-decoration: none; font-weight: 700;">+506
                                    7229 3518</a>
                            </div>

                            <div style="margin-bottom: 25px;">
                                <div
                                    style="color: #555; font-size: 0.7rem; text-transform: uppercase; font-weight: 700;">
                                    Email Corporativo</div>
                                <div style="font-size: 1.1rem; color: #fff;">ventas4labs@gmail.com</div>
                            </div>

                            <div
                                style="background: rgba(112, 24, 255, 0.05); padding: 20px; border-left: 2px solid var(--primary-purple);">
                                <p style="font-size: 0.85rem; color: #888; margin: 0; font-style: italic;">"Nuestra meta
                                    no
                                    es vender software, es construir la infraestructura que libere el potencial de tu
                                    equipo."</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <p>&copy; 2024 4Labs. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Robot Mascot & Chatbot -->
    <div id="ai-chat-wrapper">
        <div id="ai-chat-window" class="chat-hidden">
            <div class="chat-header">
                <img src="assets/images/mascot_v2.png" alt="Mascota 4Labs">
                <div>
                    <h4>Lab</h4>
                    <span class="status-online">En l铆nea</span>
                </div>
                <button id="close-chat"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <div id="chat-messages">
                <div class="msg bot-msg">隆Hola! Soy el asistente de 4Labs. 驴En qu茅 puedo ayudarte hoy sobre nuestras
                    automatizaciones?</div>
            </div>
            <div class="chat-input-area">
                <input type="text" id="chat-user-input" placeholder="Escribe tu duda aqu铆...">
                <button id="send-chat"><i class="fa-solid fa-paper-plane"></i></button>
            </div>
        </div>

        <div class="robot-mascot" id="mascot-trigger">
            <div class="robot-greeting-bubble">隆Hola! 驴Automatizamos? </div>
            <img src="assets/images/mascot_v2.png" alt="Robot Assistant">
        </div>
    </div>

    <script>
// Particle Network Animation
class ParticleNetwork {
    constructor(canvasId) {
        this.canvas = document.getElementById(canvasId);
        if (!this.canvas) return;

        this.ctx = this.canvas.getContext('2d');
        this.particles = [];
        this.resize();
        this.init();

        window.addEventListener('resize', () => this.resize());

        // Mouse interaction
        this.mouse = { x: null, y: null, radius: 150 };
        window.addEventListener('mousemove', (e) => {
            const rect = this.canvas.getBoundingClientRect();
            this.mouse.x = e.clientX - rect.left;
            this.mouse.y = e.clientY - rect.top;
        });

        this.animate();
    }

    resize() {
        this.canvas.width = window.innerWidth;
        this.canvas.height = window.innerHeight;
        this.createParticles();
    }

    init() {
        this.createParticles();
    }

    createParticles() {
        this.particles = [];
        const numberOfParticles = (this.canvas.width * this.canvas.height) / 45000;

        for (let i = 0; i < numberOfParticles; i++) {
            const size = Math.random() * 2 + 1;
            const x = Math.random() * ((this.canvas.width - size * 2) - (size * 2)) + size * 2;
            const y = Math.random() * ((this.canvas.height - size * 2) - (size * 2)) + size * 2;
            const directionX = (Math.random() * 2) - 1; // -1 to 1
            const directionY = (Math.random() * 2) - 1;
            const color = '#8C55AA'; // Purple-ish tint base

            this.particles.push({ x, y, directionX, directionY, size, color });
        }
    }

    animate() {
        requestAnimationFrame(this.animate.bind(this));
        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);

        for (let i = 0; i < this.particles.length; i++) {
            let p = this.particles[i];

            // Movement
            p.x += p.directionX * 0.5;
            p.y += p.directionY * 0.5;

            // Bounce check
            if (p.x > this.canvas.width || p.x < 0) p.directionX = -p.directionX;
            if (p.y > this.canvas.height || p.y < 0) p.directionY = -p.directionY;

            // Mouse Interaction (Repel/Attract)
            let dx = this.mouse.x - p.x;
            let dy = this.mouse.y - p.y;
            let distance = Math.sqrt(dx * dx + dy * dy);

            if (distance < this.mouse.radius) {
                const forceDirectionX = dx / distance;
                const forceDirectionY = dy / distance;
                const force = (this.mouse.radius - distance) / this.mouse.radius;
                const directionX = forceDirectionX * force * 3; // repel strength
                const directionY = forceDirectionY * force * 3;

                // Determine functionality: attract or repel? Let's subtly attract for "network" feel
                // Or repel for "disturbance". Let's do subtle attraction to cursor
                // p.x += directionX; // attract
                // p.y += directionY;

                // Let's actually do standard constellation connection logic instead of heavy force
            }

            // Draw Particle
            this.ctx.beginPath();
            this.ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2, false);
            this.ctx.fillStyle = 'rgba(140, 85, 170, 0.5)'; // Muted purple
            this.ctx.fill();

            // Connecting Lines
            this.connect();
        }
    }

    connect() {
        let opacityValue = 1;
        const maxDist = (this.canvas.width / 7) * (this.canvas.height / 7);

        for (let a = 0; a < this.particles.length; a++) {
            for (let b = a; b < this.particles.length; b++) {
                // Quick bounding box check
                if (Math.abs(this.particles[a].x - this.particles[b].x) > 200) continue;
                if (Math.abs(this.particles[a].y - this.particles[b].y) > 200) continue;

                let distance = ((this.particles[a].x - this.particles[b].x) * (this.particles[a].x - this.particles[b].x)) +
                    ((this.particles[a].y - this.particles[b].y) * (this.particles[a].y - this.particles[b].y));

                if (distance < maxDist) {
                    opacityValue = 1 - (distance / 20000);
                    this.ctx.strokeStyle = 'rgba(140, 85, 170,' + opacityValue * 0.15 + ')';
                    this.ctx.lineWidth = 1;
                    this.ctx.beginPath();
                    this.ctx.moveTo(this.particles[a].x, this.particles[a].y);
                    this.ctx.lineTo(this.particles[b].x, this.particles[b].y);
                    this.ctx.stroke();
                }
            }
        }
    }
}

document.addEventListener('DOMContentLoaded', () => {
    // Initialize things
    new ParticleNetwork('bg-canvas'); // Start the background

    // Smooth scrolling
    /* =========================================
       0. Lenis Smooth Scroll Setup (Ganify Tuning)
       ========================================= */
    const lenis = new Lenis({
        duration: 1.5, // Slower, heavier feel
        easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)), // Exponential decay
        direction: 'vertical',
        gestureDirection: 'vertical',
        smooth: true,
        mouseMultiplier: 0.8, // Less sensitive for weight
        smoothTouch: false,
        touchMultiplier: 2,
    });

    // Parallax Elements
    const parallaxItems = document.querySelectorAll('[data-speed]');

    function raf(time) {
        lenis.raf(time);

        // Parallax Logic inside RAF for performance
        parallaxItems.forEach(item => {
            const speed = parseFloat(item.getAttribute('data-speed'));
            const yPos = window.scrollY * speed;
            item.style.transform = `translateY(${yPos}px)`;
        });

        requestAnimationFrame(raf);
    }

    requestAnimationFrame(raf);

    /* =========================================
       1. Intersection Observer for Scroll Animations
       ========================================= */
    const observerOptions = {
        threshold: 0.15,
        rootMargin: "0px 0px -50px 0px"
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('is-visible');
                // Optional: Stop observing once revealed
                // observer.unobserve(entry.target);
            }
        });
    }, observerOptions);

    // Target new Ganify elements
    const splitReveals = document.querySelectorAll('.hero-title, .reveal-clip, .reveal-text');
    splitReveals.forEach(el => observer.observe(el));

    // TYPEWRITER EFFECT OBSERVER
    const typeWriterObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const el = entry.target;
                if (!el.hasAttribute('data-typed')) {
                    el.setAttribute('data-typed', 'true');
                    const text = el.getAttribute('data-text') || el.innerText;
                    el.innerText = ''; // Clear for typing

                    let i = 0;
                    const speed = 120; // ms per char (Epic Slow)

                    function type() {
                        if (i < text.length) {
                            el.innerText += text.charAt(i);
                            i++;
                            setTimeout(type, speed);
                        } else {
                            el.classList.add('typing-done');
                        }
                    }
                    type();
                }
                typeWriterObserver.unobserve(el);
            }
        });
    }, { threshold: 0.2 });

    const typeWriters = document.querySelectorAll('.type-writer');
    typeWriters.forEach(el => {
        // Store original text in data attribute to prevent layout shifts/loss
        el.setAttribute('data-text', el.innerText);
        // Optional: keep text visible until typing starts nicely? 
        // For now, let's let observer handle the clear-then-type to avoid FOUC
        typeWriterObserver.observe(el);
    });

    // Legacy Reveal Support (Bento cards, etc)
    const legacyReveals = document.querySelectorAll('.reveal');
    legacyReveals.forEach(el => observer.observe(el));

    /* =========================================
       2. Navbar Transparency Logic
       ========================================= */
    const navbar = document.querySelector('.navbar');
    window.addEventListener('scroll', () => {
        if (window.scrollY > 30) {
            navbar.classList.add('scrolled');
        } else {
            navbar.classList.remove('scrolled');
        }
    });

    /* =========================================
       3. Chatbot Toggle & Logic (Lab)
       ========================================= */
    const mascotTrigger = document.getElementById('mascot-trigger');
    const closeChatBtn = document.getElementById('close-chat');
    const chatWindow = document.getElementById('ai-chat-window');
    const chatInput = document.getElementById('chat-user-input');
    const sendBtn = document.getElementById('send-chat');
    const messagesContainer = document.getElementById('chat-messages');

    let greetingInterval; // Define variable in scope

    function toggleChat() {
        chatWindow.classList.toggle('chat-hidden');

        // Stop greeting if chat is open
        if (!chatWindow.classList.contains('chat-hidden')) {
            if (greetingInterval) clearInterval(greetingInterval);
            const bubble = document.querySelector('.robot-greeting-bubble');
            if (bubble) bubble.style.display = 'none';
        }
    }

    if (mascotTrigger) mascotTrigger.addEventListener('click', toggleChat);
    if (closeChatBtn) closeChatBtn.addEventListener('click', () => chatWindow.classList.add('chat-hidden'));

    // Chat Interaction Logic
    function addMessage(text, sender) {
        const msgDiv = document.createElement('div');
        msgDiv.classList.add('msg', sender === 'user' ? 'user-msg' : 'bot-msg');
        msgDiv.innerText = text;
        messagesContainer.appendChild(msgDiv);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    function handleUserMessage() {
        const text = chatInput.value.trim();
        if (!text) return;

        // User Msg
        addMessage(text, 'user');
        chatInput.value = '';

        // Simulate Bot Response
        setTimeout(() => {
            const prompt = text.toLowerCase();
            let response = "Entiendo. Para darte una soluci贸n precisa, lo mejor es un diagn贸stico r谩pido. 驴Te gustar铆a agendar una llamada con un ingeniero?";

            if (prompt.includes('hola') || prompt.includes('buen')) {
                response = "隆Hola! Soy Lab, tu asistente de automatizaci贸n. 驴Buscas mejorar ventas, soporte o procesos internos?";
            } else if (prompt.includes('precio') || prompt.includes('costo') || prompt.includes('cuanto')) {
                response = "Nuestras implementaciones var铆an seg煤n la complejidad del flujo. Sin embargo, el ROI suele ser menor a 3 semanas. 驴Quieres que evaluemos tu caso?";
            } else if (prompt.includes('venta') || prompt.includes('lead')) {
                response = "El m贸dulo de Ventas es nuestro best-seller. Califica leads en segundos y los agenda en tu CRM. 驴Te interesa ver c贸mo funciona?";
            } else if (prompt.includes('soporte') || prompt.includes('ticket')) {
                response = "Podemos reducir tu tiempo de respuesta en un 90%. El chatbot resuelve dudas frecuentes y escala solo lo complejo.";
            } else if (prompt.includes('humano') || prompt.includes('persona')) {
                response = "隆Claro! Mis creadores est谩n listos. Puedes escribirles directamente al WhatsApp +506 7229 3518.";
            }

            addMessage(response, 'bot');
        }, 800);
    }

    if (sendBtn) {
        sendBtn.addEventListener('click', handleUserMessage);
    }

    if (chatInput) {
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') handleUserMessage();
        });
    }

    // Dynamic Greetings & Engagement
    const greetings = [
        "驴Ventas lentas?",
        "Optimiza tu flujo ",
        "驴Hablas con soporte?",
        "Automatiza hoy ",
        "驴Te ayudo?"
    ];

    const bubble = document.querySelector('.robot-greeting-bubble');
    let greetingIndex = 0;

    function rotateGreeting() {
        if (!bubble) return;

        // Hide, change text, show
        bubble.classList.remove('visible');

        setTimeout(() => {
            greetingIndex = (greetingIndex + 1) % greetings.length;
            bubble.innerText = greetings[greetingIndex];
            bubble.classList.add('visible');
        }, 500);
    }

    // Start rotation
    if (bubble) {
        bubble.classList.add('visible'); // Show initial
        greetingInterval = setInterval(rotateGreeting, 5000); // Change every 5s
    }

    // Auto-open logic (Disabled by user request)
    /*
    let hasAutoOpened = false;
    setTimeout(() => {
        if (!hasAutoOpened && chatWindow.classList.contains('chat-hidden')) {
            toggleChat();
            hasAutoOpened = true;

            // Simulating a fresh welcome message
            const messages = document.getElementById('chat-messages');
            if (messages) {
                // messages.innerHTML += `<div class="msg bot-msg" style="animation: fade-in 0.5s"> 隆Hola! Detecto inter茅s en automatizaci贸n. 驴Te gustar铆a un diagn贸stico r谩pido?</div>`;
            }
        }
    }, 7000); // Open after 7 seconds
    */

    /* =========================================
       4. Canvas Particles (Updated Colors)
       ========================================= */
    const canvas = document.getElementById('particles-canvas');
    if (canvas) {
        const ctx = canvas.getContext('2d');
        let width, height;
        let particles = [];

        // Brand Colors for particles
        const colors = ['rgba(112, 24, 255, 0.4)', 'rgba(0, 230, 168, 0.4)', 'rgba(10, 31, 68, 0.5)'];

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        class Particle {
            constructor() {
                this.reset();
            }

            reset() {
                this.x = Math.random() * width;
                this.y = Math.random() * height;
                this.vx = (Math.random() - 0.5) * 0.3;
                this.vy = (Math.random() - 0.5) * 0.3;
                this.size = Math.random() * 2 + 1;
                this.color = colors[Math.floor(Math.random() * colors.length)];
                this.alpha = Math.random() * 0.5 + 0.1;
            }

            update() {
                this.x += this.vx;
                this.y += this.vy;

                // Wrap around screen
                if (this.x < 0) this.x = width;
                if (this.x > width) this.x = 0;
                if (this.y < 0) this.y = height;
                if (this.y > height) this.y = 0;
            }

            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.fill();
            }
        }

        // Create Particle Cluster
        for (let i = 0; i < 100; i++) { // More particles
            particles.push(new Particle());
        }

        function animate() {
            ctx.clearRect(0, 0, width, height);

            // Update and draw particles (No lines)
            particles.forEach((p) => {
                p.update();

                // Draw 'Dust'
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size * 0.5, 0, Math.PI * 2); // Smaller
                ctx.fillStyle = p.color;
                ctx.fill();
            });

            requestAnimationFrame(animate);
        }
        animate();
    }
});

</script>
</body>

</html>